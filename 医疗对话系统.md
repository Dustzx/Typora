# 医疗对话系统

### 论文梳理

1. ### Mental Health

   [ A Multi-Persona Chatbot for Hotline Counselor Training  ](papers/A Multi-Persona Chatbot for Hotline Counselor Training.pdf)

   [Towards Facilitating Empathic Conversations in Online Mental Health Support- A Reinforcement Learning Approach](Towards Facilitating Empathic Conversations in Online Mental Health Support- A Reinforcement Learning Approach.pdf)

   [Multi-Party Empathetic Dialogue Generation: A New Task for Dialog Systems](papers/Multi-Party Empathetic Dialogue Generation.pdf)

   提出了新的对话系统任务，即共情对话时有多方参与时能够理清各方的情绪流。

   [Empathetic Dialogue Generation](papers/Empathetic Dialogue Generation via Sensitive Emotion Recognition and Sensible Knowledge Selection.pdf)

2. ### Physical Health

   [On the Generation of Medical Dialogs for COVID-19](papers/On the Generation of Medical Dialogs for COVID-19.pdf)：提出了**多任务学习**方法，即使用一个带掩码的token的预测任务充当低资源对话生成任务的正则项。

3. ### Health information

   [DialMed](papers/DIALMED-A Dataset for Dialogue-based Medication Recommendation.pdf)：药物推荐数据集

   [MEDCOD](papers/MEDCOD.pdf)：NLG模块的改进，增强了回复的情感,从而能够提高系统的engagement

   [NeuralSympCheck](papers/NeuralSympCheck.pdf)

   [Generative Adversarial Regularized Mutual Information Policy Gradient Framework ](papers/Generative Adversarial Regularized Mutual Information Policy Gradient Framework for Automatic Diagnosis.pdf)

   [Diaformer](papers/Diaformer.pdf)

   [DxFormer](papers/DxFormer.pdf)

   RL诊断：

   [NIPS_DeepRL_2016_Symptom_Checker](papers/NIPS_DeepRL_2016_Symptom_Checker.pdf)

   [Task-oriented Dialogue System for Automatic Disease Diagnosis via Hierarchical Reinforcement Learning](papers/Task-oriented Dialogue System for Automatic Disease Diagnosis via Hierarchical Reinforcement Learning.pdf)

   [Task-oriented Dialogue System for Automatic Diagnosis](papers/Task-oriented Dialogue System for Automatic Diagnosis.pdf)

   [A knowledge infused context driven dialogue agent for disease diagnosis using hierarchical reinforcement learning](papers/A knowledge infused context driven dialogue agent for disease diagnosis using hierarchical reinforcement learning.pdf)

4. 

### 想法

1. 模型的输出不应该是某个疾病而应该是多个疾病的概率，并且应该给出排查疾病所需进行检查的建议，或者是无需检查的疾病给出治疗建议。
2. 数据集应该是SymCat数据库(其中包含各个疾病对应症状的概率)与对话数据集的结合(通过SymCat学习到疾病与症状之间的关系，再通过对话问诊数据学会动态地使用这些关系)
3. RL方法可以作为提升问询效率的辅助手段，比如提高问诊到implicit症状中标签为TRUE症状的回报率

### 概念梳理

###### MDSs定义

Medical dialogue system (MDS) aims to converse with patients to inquire **additional symptoms** beyond their **self-reports** and make a diagnosis automatically, which has gained increasing attention. It has a significant potential to <u>simplify the diagnostic process</u> and relieve the cost of collecting information from patients . Moreover, <u>preliminary diagnosis reports</u> generated by MDS may assist doctors to make a diagnosis more efficiently——Graph-Evolving Meta-Learning

Due to the existing of implicit symptoms, this task can be considered as a **multi-step reasoning** problem. The challenge of the task is how to capture the underlying dynamics and uncertainties of reasoning process, then inquiry about accurate symptoms under small labeled data and limited turns

——Diaformer

###### medical consultation records (MCRs)

![1677400479166](医疗对话系统.assets/1677400479166.png)

>MCR consists of three parts: the patient’s self-provided report (i.e. self-report), multi-turn doctor–patient dialogue and the corresponding disease category

While there are some publicly available electronic health record (EHR) datasets, these datasets often lack symptom-related information. For example, the MIMIC-III dataset (Johnson et al. 2016) was collected at **intensive care units** without full symptom information

MCRs中self-report可以被当作对话中的第一句，其中的症状即为explicit symptom

###### RL实现的MDSs缺点：

Their weaknesses are the difficulty of developing and training such systems and limited applicability to cases with large and sparse decision spaces. —— NeuralSympCheck

The policy learning of RL tries to learn which symptom inquiry improves the rewards but not the doctor’s diagnostic logic directly. As a result, RL relies on the random trials to learn how to improve the reward, but don’t learn directly the correlation among symptoms and the standard diagnosis paradigm. —— Diaformer

并且RL目前没有一个理想的reward函数，来使得模型能平衡症状询问、疾病诊断两个功能

######  **SNOMED CT** 

**S**ystematized **No**menclature of **Med**icine -- **C**linical **T**erms，**医学系统命名法－临床术语**，**医学术语系统命名法－临床术语** 是一部经过系统组织编排的，便于计算机处理的医学术语集，涵盖大多数方面的临床信息，如疾病、所见、操作、微生物、药物等。采用该术语集，可以协调一致地在不同的学科、专业和照护地点之间实现对于临床数据的标引、存储、检索和聚合。同时，它还有助于组织病历内容，减少临床照护和科学研究工作中数据采集、编码及使用方式的变异。

###### 中文数据集

*Real-world dataset*：

MZ-4：从拇指医生上收集的第一个真实的医疗对话数据集，其中包含了**4**种疾病，**230**种症状和**1733**个user goals。user goal 包含三个部分的内容：
1）self-report 2）conversation 3）diagnosis
MZ-10：mz-4中的数据扩充到了**10**种疾病，包括典型的消化系统疾病、呼吸系统疾病和内分泌系统 ，我们聘请具有医学背景的专家来识别症状表达，并用三个标签（True、False 或 UNK）标记它们，以表明用户是否患有这种症状。之后，专家手动将每个症状表达与 [SNOMED CT](https://www.snomed.org/?lang=zh)上的一个概念联系起来。 
Dxy：从在线医疗网站丁香医生上收集的包含**5**种疾病，**41**种症状和**527**条user goals

*Synthetic Dataset(SymCat-SD-90)：*

following [Kao et al., 2018](papers/Context-Aware Symptom Checking for Disease Diagnosis Using Hierarchical Reinforcement Learning.pdf)，基于a symptom-disease database [Symcat](www.symcat.com)根据[ICD-10-CM](https://www.cdc.gov/nchs/icd/)将其中的801种疾病分类为了21个科室。并从中选择了9个有代表性的科室，其中每个科室都有Centers for Disease Control and Prevention (CDC) 数据库中发病率排名前十的疾病。

| Name         | # of user goal | # of diseases | Ave. # of im. sym | # of sym. |
| ------------ | -------------- | ------------- | ----------------- | --------- |
| MZ-4         | 1,733          | 4             | 5.46              | 230       |
| MZ-10        | 3,745          | 10            | 5.28              | 318       |
| Dxy          | 527            | 5             | 1.67              | 41        |
| SymCat-SD-90 | 30,000         | 90            | 2.60              | 266       |

- *action_set.p*: the types of action pre-defined for this dataset.
- *disease_set.p:* Diseases included in this dataset.
- *slot_set.p:* Symptoms included in this dataset.
- *goal.set.p & goal_test_set.p:* It contains training set and testing set, which can be visited with goal_set["train"] and goal_set["test"]
- *disease_symptom.p*: the number of symptoms occurred in each disease.